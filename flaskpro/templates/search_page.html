{% extends "base.html" %}
{% block content %}
<head>
    <link rel="stylesheet" type="text/css" src="{{ url_for('static', filename='styles_search.css') }}">
    
</head>

<div class="search_container">
    <div class="search_logo">
        <img src="{{ url_for('static', filename='default.png') }}" class="logo_image"></a>
    </div>

    <form id ="search-form" action="/search" class="search_bar" autocomplete="off">
      <input id="search-box" type="text" placeholder="enter company tag" name="que">
      <select id="search-results" size="5" style="display: none;"></select>    
      <button type="submit" value="search"><img src="{{url_for('static',filename='search.png')}}"></button>
    </form>
    <link rel="stylesheet" type="text/css" src="{{ url_for('static', filename='styles_search.css') }}">
    <script>
        $(function() {
          $('#search-box').keyup(function() {
            var query = $('#search-box').val();
            if (query.length >= 2) {
              $.getJSON('/search', {query: query}, function(data) {
                var results = '';
                $.each(data, function(index, result) {
                  results += '<option value="' + result.symbol + '">' + result.symbol + ' - ' + result.name + '</option>';
                });
                $('#search-results').html(results);
                $('#search-results').show();
              });
            } else {
              $('#search-results').hide();
            }
          });
    
          $('#search-box').focusout(function() {
            $('#search-results').hide();
          });
        });
    
    
  </script>
    <script>
      $(document).ready(function() {
          $('#search-form').submit(function(event) {
              event.preventDefault();
              var query = $('#search-box').val();
              $.post('/results', { query: query }, function(data) {
                  $('body').html(data);
              });
          });
      });
      </script>

</div>



{% endblock %}